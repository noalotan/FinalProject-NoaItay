pipeline {
    agent any  // This defines where the pipeline will run; "any" lets Jenkins decide.
    stages {  // Stages are the main steps in the CI pipeline.
        stage('Install Dependencies') {  // First stage: Install Python packages
            steps {
                // Install necessary Python packages
                sh 'pip3 install -r opt/status-page/requirements.txt'
            }
        }
        stage('Run Tests') {  // Third stage: Testing
            steps {
                dir('opt/status-page/statuspage') {
                    // Run Django tests
                    sh 'python3 manage.py test'
                }
            }
        }
    }
    post {  // Post-actions to handle success or failure
        success {
            echo 'All stages passed successfully!'
        }
        failure {
            echo 'One or more stages failed.'
        }
    }
}
